<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Word Missionï½œè‹±èªå–®å­—ç¿»ç‰Œä»»å‹™</title>

<style>
:root{
  --bg:#0b1a13;
  --board:#0f2a1d;
  --card:#153827;
  --line:#f4f1e8;
  --accent:#f9c74f;
  --soft:#cfe6da;
}
*{box-sizing:border-box}
html,body{
  margin:0;width:100%;height:100%;
  font-family:"Noto Sans TC","Microsoft JhengHei",system-ui,sans-serif;
  background:var(--bg);
}
body{display:flex;justify-content:center;align-items:center}

/* èˆå° */
.app{
  width:94vw;max-width:1280px;
  height:calc(94vw * 9 / 16);max-height:92vh;
  background:var(--board);
  border-radius:20px;
  box-shadow:0 0 0 6px rgba(255,255,255,.05);
  position:relative;
  overflow:hidden;
}

/* Header */
header{
  position:absolute;
  top:1vh;left:2vw;right:2vw;
  display:flex;justify-content:space-between;align-items:center;
  z-index:5;
}
header h1{margin:0;font-size:clamp(18px,2.6vw,30px);color:#fff}
header button{
  background:transparent;
  border:2px solid var(--line);
  color:#fff;
  padding:.4em .8em;
  border-radius:12px;
  cursor:pointer;
}

/* è¦å‰‡å°å…¥ */
#intro{
  position:absolute;inset:0;
  background:var(--board);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:1em;
  color:#fff;
  z-index:10;
}
.rule{
  opacity:0;
  animation:fadeIn .8s forwards;
}
.rule:nth-child(1){animation-delay:.3s}
.rule:nth-child(2){animation-delay:.9s}
.rule:nth-child(3){animation-delay:1.5s}
.rule:nth-child(4){animation-delay:2.1s}

@keyframes fadeIn{
  to{opacity:1}
}

#startBtn{
  margin-top:1.5em;
  background:var(--accent);
  color:#000;
  font-size:18px;
  padding:.6em 1.4em;
  border:none;
  border-radius:16px;
  cursor:pointer;
}

/* éŠæˆ²å€ */
.stage{
  position:absolute;
  inset:0;
  padding:8vh 2vw 2vh;
  display:none;
  grid-template-rows:1fr auto;
}

/* å¡ç‰‡ */
.cards{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:1.2vw;
}
.card{perspective:1200px;cursor:pointer}
.inner{width:100%;height:100%;transition:.6s;transform-style:preserve-3d}
.card.flip .inner{transform:rotateY(180deg)}
.face{
  position:absolute;inset:0;
  background:var(--card);
  border:2px solid var(--line);
  border-radius:16px;
  display:flex;justify-content:center;align-items:center;
  backface-visibility:hidden;text-align:center;padding:1em
}
.front{font-size:clamp(32px,5vw,64px);font-weight:900;color:#fff}
.back{
  transform:rotateY(180deg);
  flex-direction:column;gap:.5em;color:#fff
}

/* è¦å‰‡å°å¡ */
.rules-mini{
  position:absolute;
  right:1vw;bottom:1vh;
  background:rgba(255,255,255,.08);
  padding:.6em .8em;
  border-radius:12px;
  font-size:13px;
  color:var(--soft);
}

/* è€å¸«å´æ¬„ */
.teacher{
  position:absolute;
  right:0;top:0;
  width:280px;height:100%;
  background:#10291d;
  border-left:2px solid var(--line);
  padding:1em;
  display:none;
  color:#fff;
}
.teacher h3{margin-top:0}
.teacher input,.teacher textarea{
  width:100%;margin:.3em 0;padding:.4em;border-radius:6px;border:none
}
.teacher button{
  width:100%;margin-top:.4em;
  background:var(--accent);border:none;
  border-radius:10px;padding:.4em;
  cursor:pointer;
}

/* ç‹€æ…‹ */
.show{display:block}
.showGrid{display:grid}
</style>
</head>

<body>
<div class="app">

<header>
  <h1>Word Mission</h1>
  <button onclick="toggleTeacher()">âš™ï¸ è€å¸«è¨­å®š</button>
</header>

<!-- è¦å‰‡å°å…¥ -->
<div id="intro">
  <div class="rule">ğŸ‘¥ äº”äººä¸€çµ„ï¼Œä¸€äººä¸€å¼µå¡</div>
  <div class="rule">ğŸ”„ ç¿»ç‰Œå¾Œçš„è‹±æ–‡ï¼‹ä¸­æ–‡æ˜¯æ­£è§£</div>
  <div class="rule">ğŸ¤ ç¥ç§˜å˜‰è³“åªéœ€å”¸è‹±æ–‡ï¼‹ä¸­æ–‡</div>
  <div class="rule">ğŸ† å…¨çµ„å®Œæˆå³å¯ç²å¾—çå‹µ</div>
  <button id="startBtn" onclick="startGame()">æˆ‘æ¥ä¸‹ä»»å‹™</button>
</div>

<!-- éŠæˆ²ç•«é¢ -->
<div class="stage" id="stage">
  <div class="cards" id="cards"></div>
  <div class="rules-mini">
    ğŸ‘¥ ä¸€äººä¸€å¼µå¡<br>
    ğŸ”„ ç¿»ç‰Œæ˜¯æ­£è§£<br>
    ğŸ¤ ç¥ç§˜å˜‰è³“å¯ç”¨
  </div>
</div>

<!-- è€å¸«è¨­å®š -->
<div class="teacher" id="teacher">
  <h3>æ–°å¢å–®å­—</h3>
  <input id="tLetter" placeholder="å­—æ¯ a-z">
  <input id="tEng" placeholder="è‹±æ–‡">
  <input id="tZh" placeholder="ä¸­æ–‡">
  <button onclick="addWord()">æ–°å¢å–®å­—</button>

  <h3>æ–°å¢é è¨­é¡Œç›®</h3>
  <textarea id="presetInput" placeholder="g e w q a"></textarea>
  <button onclick="savePreset()">å„²å­˜é è¨­é¡Œ</button>
</div>

</div>

<script>
const defaultVocab={
  g:[["gate","å¤§é–€"]],
  e:[["error","éŒ¯èª¤"]],
  w:[["wallet","éŒ¢åŒ…"]],
  q:[["quiz","å°è€ƒ"]],
  a:[["area","å€åŸŸ"]]
};
let vocab=JSON.parse(localStorage.getItem("vocab"))||defaultVocab;
let preset=JSON.parse(localStorage.getItem("preset"))||["g","e","w","q","a"];
const cards=document.getElementById("cards");

function startGame(){
  document.getElementById("intro").style.display="none";
  document.getElementById("stage").classList.add("showGrid");
  render(preset);
}

function render(letters){
  cards.innerHTML="";
  letters.forEach(l=>{
    const word=vocab[l][0];
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML=`
      <div class="inner">
        <div class="face front">${l}</div>
        <div class="face back">
          <div>${word[0]}</div>
          <div>${word[1]}</div>
        </div>
      </div>`;
    c.onclick=()=>c.classList.toggle("flip");
    cards.appendChild(c);
  });
}

function toggleTeacher(){
  const t=document.getElementById("teacher");
  t.classList.toggle("show");
}

function addWord(){
  if(!vocab[tLetter.value]) vocab[tLetter.value]=[];
  vocab[tLetter.value].push([tEng.value,tZh.value]);
  localStorage.setItem("vocab",JSON.stringify(vocab));
  alert("å·²æ–°å¢");
}

function savePreset(){
  preset=presetInput.value.trim().split(/\s+/);
  localStorage.setItem("preset",JSON.stringify(preset));
  alert("é è¨­é¡Œç›®å·²å„²å­˜");
}
</script>
</body>
</html>
